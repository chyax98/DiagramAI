# SvgBob 官方文档

> **渲染引擎**: SvgBob
> **官方仓库**: https://github.com/ivanceras/svgbob
> **在线编辑器**: https://ivanceras.github.io/svgbob-editor/
> **许可证**: Apache-2.0
> **最新版本**: 0.7.6 (2025-01-27)

---

## 📋 概述

SvgBob 是一个将 ASCII 艺术图表转换为 SVG 图形的渲染引擎。它使用一组键盘上易于找到的字符来近似表示预期的形状。

**核心特性**:
- **纯文本格式**: 最终可移植、向后兼容且面向未来
- **优雅降级**: 即使不使用图形渲染器，仍然可以作为基于文本的图表看起来很好
- **易于使用**: 任何人都知道如何编辑文本

---

## 🎯 设计理念

SvgBob 是一个**图表建模工具**，它使用一组键盘字符来**近似表示**预期的形状。

### 核心原则

1. **字符映射**: 每个 ASCII 字符代表一个特定的图形元素
2. **自动识别**: 引擎自动识别形状模式（矩形、箭头、线条等）
3. **样式支持**: 支持通过标签（tags）为形状添加 CSS 样式

---

## 🔤 基础语法

### 1. 基本形状

#### 矩形
```
+------+     .------.
| Box  |     | Box  |     圆角矩形
+------+     '------'
```

#### 圆形
```
   ___         ____         _____
  /   \       /    \       /     \
 |  o  |     (  O  )      (   @  )
  \___/       \____/       \_____/
```

#### 箭头和线条
```
--->   箭头向右
<---   箭头向左
-->>   双箭头向右
|      垂直线
+      交叉点
*      星号连接点
```

### 2. 连接线

#### 水平和垂直线
```
A ----> B     水平箭头
|             垂直线
v             向下箭头
^             向上箭头
```

#### 对角线
```
 /    正斜线
 \    反斜线
```

#### 曲线和弧线
```
  .-.        圆弧
 (   )       圆形
  '-'
```

### 3. 文本标签

任何不被识别为形状的字符都会被视为文本标签。

```
+--------+
|  Text  |   <- 文本会居中显示
+--------+
```

---

## 🎨 高级特性

### 1. 样式标签系统

通过 `{tag_name}` 语法为形状添加自定义样式：

```
# 在图表代码后添加 CSS 样式定义
r1 = {
    fill: papayawhip;
}

# 在图表中使用标签
+------+
| {r1} |
+------+
```

**内置样式类**:
- `.solid` - 实线
- `.broken` - 虚线
- `.filled` - 填充
- `.nofill` - 无填充

### 2. 复杂图表示例

#### 流程图
```
       .------------.
       |   Start    |
       '------------'
              |
              v
       .------------.
       |  Process   |
       '------------'
              |
              v
       .------------.
       |    End     |
       '------------'
```

#### 电路图
```
    +10-15V           ___0,047R
  *---------o-----o-|___|--o--o--------o----o-------.
  + |       |     |       |  |         |    |       |
  -===      _|_   |       | .+.        |    |       |
  -===      .-.   |       | | | 2k2    |    |      _|_
  -===   470| +   |       | | |        |    |      \ / LED
  - |       uF|    '---.  | '+.       .+.   |       -+-
    +--------o         |6   |7 |8     | |   |        |
             ___|___   .-+----+--+-.   | |   |        |
              -═══-    |          |    '+.   |        |
                -      |1         |     |    |        |
               GND     +------o--+     o   /         |
                       |         |      | |/ BC      |
                       |         |      o-+   547    |
                       |         |      | |`>        |
                       |         |     ,+.   |       |
                .------+         | 220R| |   o----||_+ IRF9Z34
                |      |         |     | |   |    |+->
                |      | MC34063 |     `+.   |    ||_+
                |      |         |      |    |       | BYV29  -12V6
                |      |         |      '----'       o--|<-o----o--X OUT
```

### 3. 容器和分组

使用虚线边框创建容器：

```
.~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~.
!                                 :
!   +-----------+                 :
!   | Component |  {container}    :
!   '-----------'                 :
!                                 :
`~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'
```

---

## 📐 字符参考表

### 连接字符
- `-` : 水平线
- `|` : 垂直线
- `/` : 正斜线（左下到右上）
- `\` : 反斜线（左上到右下）
- `+` : 交叉点/转角
- `*` : 星号节点

### 箭头字符
- `>` : 向右箭头
- `<` : 向左箭头
- `v` : 向下箭头
- `^` : 向上箭头

### 边框字符
- `+`, `-`, `|` : 矩形边框（尖角）
- `.`, `'`, `-` : 矩形边框（圆角）
- `(`, `)` : 圆形边框

### 特殊字符
- `o` : 小圆点
- `*` : 连接节点
- `#` : 填充块

---

## 🔄 渲染过程

SvgBob 的渲染过程：

1. **字符扫描**: 读取 ASCII 文本的每个字符
2. **模式识别**: 识别形状模式（矩形、圆形、线条等）
3. **路径生成**: 将识别的模式转换为 SVG 路径
4. **样式应用**: 应用 CSS 样式和标签
5. **SVG 输出**: 生成最终的 SVG 代码

---

## 🛠️ 工具和集成

### CLI 工具

```bash
# 安装
cargo install svgbob_cli

# 使用
svgbob input.txt -o output.svg
```

### 集成到文档

#### Rust 文档
```rust
#[doc = svgbobdoc::transform!(
/// ```svgbob
/// .----.
/// | Hi |
/// '----'
/// ```
)]
```

#### Sphinx (Python)
```rst
.. svgbob::
   :font-size: 14
   :fill-color: lightblue

   +------+
   | Box  |
   +------+
```

#### Asciidoctor
```asciidoc
[svgbob]
----
+------+
| Box  |
+------+
----
```

---

## 🌐 使用场景

1. **技术文档**: 在 Markdown/代码注释中嵌入图表
2. **系统设计**: 绘制架构图和流程图
3. **电路图**: 绘制简单的电路示意图
4. **快速草图**: 不需要专业绘图工具的快速图表

---

## 📊 支持的图表类型

- ✅ 流程图 (Flowcharts)
- ✅ 框图 (Block Diagrams)
- ✅ 网络拓扑图 (Network Topology)
- ✅ 电路图 (Circuit Diagrams)
- ✅ 时序图 (Sequence Diagrams - 简化版)
- ✅ ER 图 (Entity Relationship - 简化版)
- ✅ 架构图 (Architecture Diagrams)

---

## 🔗 相关资源

- **官方文档**: https://docs.rs/svgbob
- **在线编辑器**: https://ivanceras.github.io/svgbob-editor/
- **GitHub 仓库**: https://github.com/ivanceras/svgbob
- **Rust Crate**: https://crates.io/crates/svgbob
- **Sphinx 扩展**: https://github.com/sphinx-contrib/svgbob
- **Asciidoctor 集成**: https://docs.asciidoctor.org/diagram-extension/latest/diagram_types/svgbob/

---

## 📝 优势和局限

### ✅ 优势
- 纯文本格式，易于版本控制
- 无需专业绘图工具
- 优雅降级（即使不渲染也可读）
- 轻量级，快速渲染
- 易于集成到文档系统

### ⚠️ 局限
- 对齐和间距控制有限
- 复杂图表可能难以绘制
- 需要等宽字体才能正确显示
- 标签位置可能需要手动调整

---

**最后更新**: 2025-10-13
**版本**: 基于 SvgBob 0.7.6
