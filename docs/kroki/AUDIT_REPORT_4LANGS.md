# å››ç§æ¸²æŸ“è¯­è¨€ Prompt æ–‡ä»¶ç»“æ„å®¡æŸ¥æŠ¥å‘Š

**å®¡æŸ¥æ—¥æœŸ**: 2025-10-13
**å®¡æŸ¥èŒƒå›´**: d2, graphviz, wavedrom, nomnoml
**å®¡æŸ¥æ ‡å‡†**: ä¸‰å±‚æ¶æ„è§„èŒƒã€ç±»å‹å¯¹é½ã€æ–‡æ¡£å®Œæ•´æ€§

---

## æ‰§è¡Œæ‘˜è¦

### ğŸš¨ ä¸¥é‡é—®é¢˜

1. **å‰ç«¯ç±»å‹å®šä¹‰æ±¡æŸ“ä¸¥é‡** - æ‰€æœ‰4ç§è¯­è¨€éƒ½å­˜åœ¨è·¨è¯­è¨€ç±»å‹æ··å…¥
2. **ç±»å‹å®šä¹‰ä¸ Prompt æ–‡ä»¶ä¸¥é‡ä¸å¯¹é½** - å‰ç«¯å®šä¹‰äº†å¤§é‡ä¸å­˜åœ¨çš„ Prompt æ–‡ä»¶

### ğŸ“Š å®¡æŸ¥æ•°æ®

| è¯­è¨€ | å‰ç«¯ç±»å‹æ•° | Prompt æ–‡ä»¶æ•° | å¯¹é½çŠ¶æ€ | æ±¡æŸ“ç±»å‹æ•° |
|------|-----------|--------------|---------|-----------|
| **d2** | 10 (å»é‡å7æ­£ç¡®) | 7 | âŒ ä¸å¯¹é½ | 3 ä¸ªæ±¡æŸ“ |
| **graphviz** | 12 (å»é‡å6æ­£ç¡®) | 6 | âŒ ä¸å¯¹é½ | 6 ä¸ªæ±¡æŸ“ |
| **wavedrom** | 11 (å»é‡å4æ­£ç¡®) | 4 | âŒ ä¸å¯¹é½ | 7 ä¸ªæ±¡æŸ“ |
| **nomnoml** | 8 (å»é‡å4æ­£ç¡®) | 4 | âŒ ä¸å¯¹é½ | 4 ä¸ªæ±¡æŸ“ |

---

## è¯¦ç»†å®¡æŸ¥ç»“æœ

### 1. D2 è¯­è¨€

#### ä¸‰å±‚æ¶æ„
- âœ… **L1 (Universal)**: universal.txt (641 è¡Œ)
- âœ… **L2 (Common)**: d2/common.txt (234 è¡Œ)
- âœ… **L3 (Types)**: 7 ä¸ªæ–‡ä»¶

#### ç±»å‹å®šä¹‰å¯¹é½
**æ­£ç¡®çš„ç±»å‹** (7ä¸ª):
```
architecture, class, er, flowchart, grid, network, sequence
```

**å‰ç«¯é”™è¯¯å®šä¹‰** (3ä¸ªæ±¡æŸ“ç±»å‹):
```
- state      (æ¥è‡ª graphviz/mermaid)
- timing     (æ¥è‡ª graphviz/mermaid)
- tree       (æ¥è‡ª graphviz/mermaid)
```

#### å±‚çº§èŒè´£
- âœ… L1: é€šç”¨è§„åˆ™ (æ‰€æœ‰è¯­è¨€å…±äº«)
- âœ… L2: D2 è¯­è¨€ç‰¹æ€§ (èŠ‚ç‚¹ã€è¿æ¥ã€å®¹å™¨ã€æ ·å¼)
- âœ… L3: å›¾è¡¨ç±»å‹ç‰¹å®šè§„åˆ™

#### æ–‡æ¡£å®Œæ•´æ€§
- âœ… official-docs.md (3.4 KB)
- âœ… syntax-rules.md (5.5 KB)
- âœ… common-errors.md (6.1 KB)
- âœ… community-issues.md (6.9 KB)

---

### 2. Graphviz è¯­è¨€

#### ä¸‰å±‚æ¶æ„
- âœ… **L1 (Universal)**: universal.txt (641 è¡Œ)
- âœ… **L2 (Common)**: graphviz/common.txt (454 è¡Œ)
- âœ… **L3 (Types)**: 6 ä¸ªæ–‡ä»¶

#### ç±»å‹å®šä¹‰å¯¹é½
**æ­£ç¡®çš„ç±»å‹** (6ä¸ª):
```
architecture, er, flowchart, network, state, tree
```

**å‰ç«¯é”™è¯¯å®šä¹‰** (6ä¸ªæ±¡æŸ“ç±»å‹):
```
- bitfield   (æ¥è‡ª wavedrom)
- class      (æ¥æºä¸æ˜)
- component  (æ¥è‡ª nomnoml/c4plantuml)
- register   (æ¥è‡ª wavedrom)
- signal     (æ¥è‡ª wavedrom)
- timing     (æ¥è‡ª graphviz/mermaid)
```

#### å±‚çº§èŒè´£
- âœ… L1: é€šç”¨è§„åˆ™
- âœ… L2: DOT è¯­æ³•è§„åˆ™ (å›¾ç±»å‹ã€æ ‡è¯†ç¬¦ã€è¿æ¥è¯­æ³•)
- âœ… L3: å›¾è¡¨ç±»å‹ç‰¹å®šè§„åˆ™

#### æ–‡æ¡£å®Œæ•´æ€§
- âœ… official-docs.md (3.7 KB)
- âœ… syntax-rules.md (4.7 KB)
- âœ… common-errors.md (2.9 KB)
- âœ… community-issues.md (2.4 KB)

---

### 3. WaveDrom è¯­è¨€

#### ä¸‰å±‚æ¶æ„
- âœ… **L1 (Universal)**: universal.txt (641 è¡Œ)
- âœ… **L2 (Common)**: wavedrom/common.txt (340 è¡Œ)
- âœ… **L3 (Types)**: 4 ä¸ªæ–‡ä»¶

#### ç±»å‹å®šä¹‰å¯¹é½
**æ­£ç¡®çš„ç±»å‹** (4ä¸ª):
```
bitfield, register, signal, timing
```

**å‰ç«¯é”™è¯¯å®šä¹‰** (7ä¸ªæ±¡æŸ“ç±»å‹):
```
- architecture (æ¥æºä¸æ˜)
- class        (æ¥æºä¸æ˜)
- component    (æ¥è‡ª nomnoml/c4plantuml)
- diagram      (æ¥è‡ª excalidraw)
- flowchart    (æ¥æºä¸æ˜)
- sketch       (æ¥è‡ª excalidraw)
- wireframe    (æ¥è‡ª excalidraw)
```

#### å±‚çº§èŒè´£
- âœ… L1: é€šç”¨è§„åˆ™
- âœ… L2: WaveJSON è§„åˆ™ (JSON ç»“æ„ã€signalã€config)
- âœ… L3: å›¾è¡¨ç±»å‹ç‰¹å®šè§„åˆ™

#### æ–‡æ¡£å®Œæ•´æ€§
- âœ… official-docs.md (7.1 KB)
- âœ… syntax-rules.md (9.3 KB)
- âœ… common-errors.md (13.8 KB)
- âœ… community-issues.md (16.2 KB)

---

### 4. Nomnoml è¯­è¨€

#### ä¸‰å±‚æ¶æ„
- âœ… **L1 (Universal)**: universal.txt (641 è¡Œ)
- âœ… **L2 (Common)**: nomnoml/common.txt (449 è¡Œ)
- âœ… **L3 (Types)**: 4 ä¸ªæ–‡ä»¶

#### ç±»å‹å®šä¹‰å¯¹é½
**æ­£ç¡®çš„ç±»å‹** (4ä¸ª):
```
architecture, class, component, flowchart
```

**å‰ç«¯é”™è¯¯å®šä¹‰** (4ä¸ªæ±¡æŸ“ç±»å‹):
```
- context    (æ¥è‡ª c4plantuml)
- diagram    (æ¥è‡ª excalidraw)
- sketch     (æ¥è‡ª excalidraw)
- wireframe  (æ¥è‡ª excalidraw)
```

#### å±‚çº§èŒè´£
- âœ… L1: é€šç”¨è§„åˆ™
- âœ… L2: Nomnoml è¯­æ³• (èŠ‚ç‚¹ã€å…³ç³»ã€æŒ‡ä»¤ã€æ ·å¼)
- âœ… L3: å›¾è¡¨ç±»å‹ç‰¹å®šè§„åˆ™

#### æ–‡æ¡£å®Œæ•´æ€§
- âœ… official-docs.md (11.7 KB)
- âœ… syntax-rules.md (12.4 KB)
- âœ… common-errors.md (14.9 KB)
- âœ… community-issues.md (19.6 KB)

---

## ä¸‰å±‚æ¶æ„éªŒè¯

### L1 å±‚ (Universal)
âœ… **ç¬¦åˆè§„èŒƒ**
- æ–‡ä»¶: src/lib/constants/prompts/universal.txt (641 è¡Œ)
- èŒè´£: æ‰€æœ‰å›¾è¡¨å…±äº«çš„é€šç”¨è§„èŒƒ
- å†…å®¹: è¾“å‡ºæ ¼å¼ã€ä»£ç è´¨é‡ã€æ³¨é‡Šè§„èŒƒ

### L2 å±‚ (Language Common)
âœ… **ç¬¦åˆè§„èŒƒ**
- d2/common.txt (234 è¡Œ) - D2 è¯­è¨€é€šç”¨è§„åˆ™
- graphviz/common.txt (454 è¡Œ) - DOT è¯­æ³•é€šç”¨è§„åˆ™
- wavedrom/common.txt (340 è¡Œ) - WaveJSON é€šç”¨è§„åˆ™
- nomnoml/common.txt (449 è¡Œ) - Nomnoml è¯­æ³•é€šç”¨è§„åˆ™

### L3 å±‚ (Type-Specific)
âœ… **æ–‡ä»¶ç»“æ„ç¬¦åˆè§„èŒƒ**
âŒ **å‰ç«¯ç±»å‹å®šä¹‰ä¸¥é‡é”™è¯¯**

---

## æ ¸å¿ƒé—®é¢˜æ€»ç»“

### é—®é¢˜1: å‰ç«¯ç±»å‹å®šä¹‰æ±¡æŸ“

**åŸå› **: å¤åˆ¶ç²˜è´´å…¶ä»–è¯­è¨€çš„ç±»å‹å®šä¹‰æ—¶æœªæ¸…ç†

**å½±å“**:
- ç”¨æˆ·é€‰æ‹©äº†ä¸å­˜åœ¨çš„ Prompt æ–‡ä»¶ç±»å‹
- AI æ— æ³•è·å–æ­£ç¡®çš„ L3 prompt
- å¯¼è‡´ç”Ÿæˆè´¨é‡ä¸‹é™æˆ–å¤±è´¥

**æ±¡æŸ“ç»Ÿè®¡**:
- d2: 3ä¸ªæ±¡æŸ“ç±»å‹ (æ¥è‡ª graphviz/mermaid)
- graphviz: 6ä¸ªæ±¡æŸ“ç±»å‹ (æ¥è‡ª wavedrom/nomnoml)
- wavedrom: 7ä¸ªæ±¡æŸ“ç±»å‹ (æ¥è‡ª excalidraw/nomnoml)
- nomnoml: 4ä¸ªæ±¡æŸ“ç±»å‹ (æ¥è‡ª c4plantuml/excalidraw)

### é—®é¢˜2: ç±»å‹å®šä¹‰ä¸ Prompt æ–‡ä»¶ä¸å¯¹é½

**å¯¹é½éªŒè¯**:
```
d2:        å‰ç«¯10ä¸ª vs Prompt 7ä¸ª  â†’ 3ä¸ªæ— æ•ˆ
graphviz:  å‰ç«¯12ä¸ª vs Prompt 6ä¸ª  â†’ 6ä¸ªæ— æ•ˆ
wavedrom:  å‰ç«¯11ä¸ª vs Prompt 4ä¸ª  â†’ 7ä¸ªæ— æ•ˆ
nomnoml:  å‰ç«¯8ä¸ª  vs Prompt 4ä¸ª  â†’ 4ä¸ªæ— æ•ˆ
```

### é—®é¢˜3: æ–‡æ¡£å®Œæ•´ä½†æœªè¢«å‰ç«¯æ­£ç¡®ä½¿ç”¨

**æ–‡æ¡£è´¨é‡**: âœ… ä¼˜ç§€
- æ‰€æœ‰4ç§è¯­è¨€éƒ½æœ‰å®Œæ•´çš„4æ–‡ä»¶æ–‡æ¡£
- æ€»è®¡ 16 ä¸ªæ–‡æ¡£æ–‡ä»¶
- å†…å®¹è¯¦å®ã€æ¥æºæ¸…æ™°

**å‰ç«¯é›†æˆ**: âŒ å¤±è´¥
- å‰ç«¯ç±»å‹å®šä¹‰æœªå‚è€ƒæ–‡æ¡£
- å­˜åœ¨å¤§é‡ä¸å­˜åœ¨çš„ç±»å‹

---

## ä¿®å¤å»ºè®®

### ç«‹å³ä¿®å¤ (Critical)

1. **æ¸…ç†å‰ç«¯ç±»å‹å®šä¹‰**
   ```typescript
   // src/lib/constants/diagram-types.ts

   d2: [
     { value: "architecture", ... },
     { value: "class", ... },
     { value: "er", ... },
     { value: "flowchart", ... },
     { value: "grid", ... },
     { value: "network", ... },
     { value: "sequence", ... },
     // åˆ é™¤: state, timing, tree
   ],

   graphviz: [
     { value: "architecture", ... },
     { value: "er", ... },
     { value: "flowchart", ... },
     { value: "network", ... },
     { value: "state", ... },
     { value: "tree", ... },
     // åˆ é™¤: bitfield, class, component, register, signal, timing
   ],

   wavedrom: [
     { value: "bitfield", ... },
     { value: "register", ... },
     { value: "signal", ... },
     { value: "timing", ... },
     // åˆ é™¤: architecture, class, component, diagram, flowchart, sketch, wireframe
   ],

   nomnoml: [
     { value: "architecture", ... },
     { value: "class", ... },
     { value: "component", ... },
     { value: "flowchart", ... },
     // åˆ é™¤: context, diagram, sketch, wireframe
   ]
   ```

2. **æ›´æ–°å‰ç«¯æè¿°æ–‡æœ¬**
   - d2: "ç°ä»£åŒ–å£°æ˜å¼å›¾è¡¨,7 ç§å›¾è¡¨" (å½“å‰é”™è¯¯: 7)
   - graphviz: "DOT è¯­è¨€å›¾å½¢å¯è§†åŒ–,6 ç§å›¾è¡¨" (å½“å‰é”™è¯¯: 6)
   - wavedrom: "æ•°å­—ä¿¡å·æ—¶åºå›¾,4 ç§å›¾è¡¨" (å½“å‰é”™è¯¯: 4)
   - nomnoml: "ç®€åŒ– UML å›¾è¡¨,4 ç§å›¾è¡¨" (å½“å‰é”™è¯¯: 4)

### é¢„é˜²æªæ–½ (Long-term)

1. **ç±»å‹å®šä¹‰éªŒè¯è„šæœ¬**
   ```bash
   # scripts/verify-types.ts
   # è‡ªåŠ¨æ£€æŸ¥å‰ç«¯ç±»å‹ä¸ Prompt æ–‡ä»¶å¯¹é½
   ```

2. **CI/CD é›†æˆ**
   - æäº¤å‰è‡ªåŠ¨è¿è¡ŒéªŒè¯è„šæœ¬
   - å‘ç°ä¸å¯¹é½æ—¶é˜»æ­¢æäº¤

3. **æ–‡æ¡£é©±åŠ¨å¼€å‘**
   - å…ˆåˆ›å»º Prompt æ–‡ä»¶
   - åæ·»åŠ å‰ç«¯ç±»å‹å®šä¹‰
   - éªŒè¯å¯¹é½åæäº¤

---

## å†å²æ•™è®­å‚è€ƒ

**2025-10-12 ç±»å‹æ±¡æŸ“äº‹ä»¶**:
- å‘ç°æ‰€æœ‰23ç§è¯­è¨€å­˜åœ¨ä¸¥é‡ç±»å‹æ··ä¹±
- æ ¹æœ¬åŸå› : å¤åˆ¶ç²˜è´´é”™è¯¯
- ä¿®å¤æ–¹å¼: å®Œå…¨åŸºäº Prompt æ–‡ä»¶é‡å»ºç±»å‹å®šä¹‰
- ç»“æœ: ç±»å‹æ•°é‡ä» 600+ å‡å°‘åˆ° 80+ ä¸ªæ­£ç¡®å®šä¹‰

**æœ¬æ¬¡å®¡æŸ¥å‘ç°**:
- åŒæ ·çš„é—®é¢˜åœ¨è¿™4ç§è¯­è¨€ä¸­é‡ç°
- è¯´æ˜ä¹‹å‰çš„ä¿®å¤å¯èƒ½ä¸å®Œæ•´æˆ–è¢«è¦†ç›–
- éœ€è¦æ›´ä¸¥æ ¼çš„éªŒè¯æœºåˆ¶

---

## ç»“è®º

### æ¶æ„è¯„åˆ†

| ç»´åº¦ | è¯„åˆ† | è¯´æ˜ |
|-----|------|------|
| **ä¸‰å±‚æ¶æ„** | âœ… ä¼˜ç§€ | L1/L2/L3 å±‚çº§æ¸…æ™°,èŒè´£æ˜ç¡® |
| **Prompt æ–‡ä»¶** | âœ… ä¼˜ç§€ | æ‰€æœ‰æ–‡ä»¶å®Œæ•´,å†…å®¹è¯¦å® |
| **æ–‡æ¡£å®Œæ•´æ€§** | âœ… ä¼˜ç§€ | 16ä¸ªæ–‡æ¡£æ–‡ä»¶,è´¨é‡é«˜ |
| **ç±»å‹å¯¹é½** | âŒ å¤±è´¥ | å‰ç«¯å®šä¹‰ä¸¥é‡æ±¡æŸ“ |
| **å‰ç«¯é›†æˆ** | âŒ å¤±è´¥ | 20ä¸ªæ— æ•ˆç±»å‹å®šä¹‰ |

### æœ€ç»ˆè¯„ä»·

**æ¶æ„è®¾è®¡**: âœ… ä¼˜ç§€ - ä¸‰å±‚æ¶æ„è§„èŒƒåˆç†,æ–‡æ¡£ä½“ç³»å®Œå–„

**å®æ–½è´¨é‡**: âŒ å·® - å‰ç«¯ç±»å‹å®šä¹‰ä¸¥é‡é”™è¯¯,ä¸æ¶æ„è®¾è®¡è„±èŠ‚

**ä¼˜å…ˆçº§**: ğŸš¨ ç´§æ€¥ä¿®å¤ - å½±å“ç”¨æˆ·ä½“éªŒå’Œ AI ç”Ÿæˆè´¨é‡

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2025-10-13 11:41:29
**å»ºè®®ä¿®å¤æ—¶é—´**: ç«‹å³ (1-2 å°æ—¶å†…å®Œæˆ)
