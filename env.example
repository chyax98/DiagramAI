# DiagramAI 环境变量配置模板
# 复制此文件为 .env.local 并填入真实值

# ========================================
# 安全配置 (必须配置)
# ========================================

# JWT Secret Key (用于签名和验证 JWT Token)
# 生成方式: openssl rand -base64 64
# 最少 64 字符，建议使用强随机字符串
# 过期时间: 7 天（硬编码在 src/lib/auth/jwt.ts）
JWT_SECRET=your-secure-jwt-secret-key-min-64-chars-replace-this

# ========================================
# 数据库配置
# ========================================

# SQLite 数据库文件路径
DB_PATH=./data/diagram-ai.db

# 数据库操作超时（毫秒）
DB_TIMEOUT=5000

# ========================================
# 密码加密配置
# ========================================

# bcrypt 加密轮数（8=开发, 10=默认, 12=生产）
BCRYPT_SALT_ROUNDS=10

# ========================================
# AI 服务配置
# ========================================

# AI 生成温度（0.0-2.0，推荐 0.7）
AI_TEMPERATURE=0.7

# AI 请求失败后的最大重试次数
AI_MAX_RETRIES=3

# AI 模型连接测试超时（毫秒）
# 30 秒足以覆盖普通模型和推理模型（如 o1, DeepSeek-R1）
API_TEST_TIMEOUT=30000

# 注意: AI Provider 的 API Key 存储在数据库 ai_models 表中
# 用户在前端「模型配置」页面添加 AI 模型和 API Key

# ========================================
# 外部服务配置 - Kroki 图表渲染
# ========================================

# Kroki 客户端 URL (浏览器访问)
# 默认通过 API 代理访问，避免 CORS 问题
# NEXT_PUBLIC_KROKI_URL=/api/kroki

# Kroki 服务端 URL (服务器端访问)
# 默认: https://kroki.io (公共服务)
# KROKI_INTERNAL_URL=https://kroki.io

# Kroki 请求超时时间（毫秒）
NEXT_PUBLIC_KROKI_TIMEOUT=5000

# Kroki 最大重试次数
NEXT_PUBLIC_KROKI_MAX_RETRIES=3

# Kroki 重试延迟（毫秒）
NEXT_PUBLIC_KROKI_RETRY_DELAY=1000

# ========================================
# 输入限制配置
# ========================================

# 最大输入字符数
NEXT_PUBLIC_MAX_INPUT_CHARS=20000

# 最大对话轮次
NEXT_PUBLIC_MAX_CHAT_ROUNDS=10

# ========================================
# 应用配置
# ========================================

# 应用 URL
NEXT_PUBLIC_APP_URL=http://localhost:3000
