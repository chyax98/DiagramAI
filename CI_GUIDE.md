# CI/CD è´¨é‡æ£€æŸ¥æŒ‡å—

æœ¬é¡¹ç›®é…ç½®äº†å®Œæ•´çš„ CI/CD è´¨é‡æ£€æŸ¥æµç¨‹,ä»¥å‡å°‘ä»£ç ç¼ºé™·ã€‚

## ğŸ” æœ¬åœ°æ£€æŸ¥å‘½ä»¤

### å¿«é€Ÿæ£€æŸ¥ (æ¨èåœ¨æäº¤å‰è¿è¡Œ)
```bash
npm run precommit
```
åŒ…å«:
- âœ… ä»£ç æ ¼å¼æ£€æŸ¥ (Prettier)
- âœ… ESLint è§„åˆ™æ£€æŸ¥
- âœ… TypeScript ç±»å‹æ£€æŸ¥

### å®Œæ•´ CI æ£€æŸ¥
```bash
npm run ci
```
åŒ…å«ä¸Šè¿°æ£€æŸ¥ + æ­»ä»£ç æ£€æµ‹ (knip)

### æœ€å®Œæ•´æ£€æŸ¥ (åŒ…å«æ„å»º)
```bash
npm run ci:full
```
åŒ…å«æ‰€æœ‰æ£€æŸ¥ + ç”Ÿäº§æ„å»ºéªŒè¯

## ğŸ› ï¸ å•é¡¹æ£€æŸ¥å‘½ä»¤

| å‘½ä»¤ | è¯´æ˜ | ä¿®å¤å‘½ä»¤ |
|------|------|----------|
| `npm run format:check` | æ£€æŸ¥ä»£ç æ ¼å¼ | `npm run format` |
| `npm run lint` | ESLint æ£€æŸ¥ | `npm run lint -- --fix` |
| `npm run type-check` | TypeScript ç±»å‹æ£€æŸ¥ | æ‰‹åŠ¨ä¿®å¤ç±»å‹é”™è¯¯ |
| `npm run dead-code` | æ£€æµ‹æœªä½¿ç”¨ä»£ç  | æ‰‹åŠ¨æ¸…ç†æˆ–æ›´æ–° knip é…ç½® |
| `npm run dead-code:exports` | ä»…æ£€æµ‹æœªä½¿ç”¨å¯¼å‡º | - |
| `npm run dead-code:deps` | ä»…æ£€æµ‹æœªä½¿ç”¨ä¾èµ– | `npm uninstall <package>` |

## ğŸ¤– è‡ªåŠ¨åŒ–æ£€æŸ¥

### Git Hooks (Husky)
é¡¹ç›®é…ç½®äº† pre-commit hook,åœ¨æ¯æ¬¡æäº¤å‰è‡ªåŠ¨è¿è¡Œ:
- ä»£ç æ ¼å¼æ£€æŸ¥
- ESLint æ£€æŸ¥
- TypeScript ç±»å‹æ£€æŸ¥

å¦‚æœæ£€æŸ¥å¤±è´¥,æäº¤å°†è¢«é˜»æ­¢ã€‚

**è·³è¿‡ hooks** (ä¸æ¨è):
```bash
git commit --no-verify -m "your message"
```

### GitHub Actions CI
æ¯æ¬¡ push æˆ– PR åˆ° `main`/`develop` åˆ†æ”¯æ—¶è‡ªåŠ¨è¿è¡Œ:

#### 1. **ä»£ç è´¨é‡æ£€æŸ¥** (quality-checks)
- åœ¨ Node.js 18.x å’Œ 20.x ä¸Šæµ‹è¯•
- è¿è¡Œæ‰€æœ‰è´¨é‡æ£€æŸ¥å·¥å…·
- æ­»ä»£ç æ£€æµ‹ (å…è®¸å¤±è´¥,ä»…è­¦å‘Š)

#### 2. **æ„å»ºæµ‹è¯•** (build)
- éªŒè¯ç”Ÿäº§æ„å»ºæˆåŠŸ
- æ£€æŸ¥æ„å»ºäº§ç‰©å®Œæ•´æ€§

#### 3. **ä¾èµ–å®‰å…¨å®¡è®¡** (dependency-audit)
- npm audit å®‰å…¨æ¼æ´æ£€æŸ¥
- depcheck æœªä½¿ç”¨ä¾èµ–æ£€æµ‹

## ğŸ“‹ è´¨é‡æ ‡å‡†

æ‰€æœ‰ä»£ç å¿…é¡»é€šè¿‡ä»¥ä¸‹æ£€æŸ¥æ‰èƒ½åˆå¹¶:

- âœ… **æ ¼å¼è§„èŒƒ**: ç¬¦åˆ Prettier é…ç½®
- âœ… **ä»£ç è§„èŒƒ**: é€šè¿‡ ESLint æ£€æŸ¥
- âœ… **ç±»å‹å®‰å…¨**: é€šè¿‡ TypeScript ä¸¥æ ¼æ¨¡å¼
- âœ… **å¯æ„å»º**: ç”Ÿäº§æ„å»ºæˆåŠŸ
- âš ï¸ **æ— æ­»ä»£ç **: knip æ£€æµ‹ (å»ºè®®,éå¼ºåˆ¶)
- âš ï¸ **ä¾èµ–å®‰å…¨**: æ— é«˜å±æ¼æ´ (å»ºè®®,éå¼ºåˆ¶)

## ğŸ”§ é…ç½®æ–‡ä»¶

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `.github/workflows/ci.yml` | GitHub Actions CI é…ç½® |
| `.husky/pre-commit` | Git pre-commit hook |
| `knip.json` | æ­»ä»£ç æ£€æµ‹é…ç½® |
| `.prettierrc` | ä»£ç æ ¼å¼é…ç½® |
| `eslint.config.mjs` | ESLint é…ç½® |
| `tsconfig.json` | TypeScript é…ç½® |

## ğŸš¨ å¸¸è§é—®é¢˜

### 1. Pre-commit hook å¤ªæ…¢
å¯ä»¥ä¸´æ—¶è·³è¿‡ (ä¸æ¨è):
```bash
git commit --no-verify -m "your message"
```

æˆ–ä¼˜åŒ–æ£€æŸ¥èŒƒå›´ (ä»…æ£€æŸ¥æš‚å­˜æ–‡ä»¶):
```bash
# ä¿®æ”¹ .husky/pre-commit ä½¿ç”¨ lint-staged
```

### 2. Knip è¯¯æŠ¥æœªä½¿ç”¨ä»£ç 
ç¼–è¾‘ `knip.json` æ·»åŠ å¿½ç•¥è§„åˆ™:
```json
{
  "ignore": ["src/lib/your-file.ts"]
}
```

### 3. CI æ„å»ºå¤±è´¥ä½†æœ¬åœ°æˆåŠŸ
- æ£€æŸ¥ Node.js ç‰ˆæœ¬ä¸€è‡´æ€§
- ç¡®ä¿ `package-lock.json` å·²æäº¤
- éªŒè¯ç¯å¢ƒå˜é‡é…ç½®

## ğŸ“š æœ€ä½³å®è·µ

1. **æäº¤å‰**: è¿è¡Œ `npm run precommit` å¿«é€Ÿæ£€æŸ¥
2. **é‡å¤§æ”¹åŠ¨**: è¿è¡Œ `npm run ci:full` å®Œæ•´éªŒè¯
3. **å®šæœŸæ¸…ç†**: æ¯æœˆè¿è¡Œ `npm run dead-code` æ£€æŸ¥åºŸå¼ƒä»£ç 
4. **ä¾èµ–æ›´æ–°**: æ›´æ–°åè¿è¡Œ `npm audit` æ£€æŸ¥å®‰å…¨æ€§

---

**ç›®æ ‡**: é€šè¿‡è‡ªåŠ¨åŒ–æ£€æŸ¥,åœ¨ä»£ç åˆå¹¶å‰å‘ç°å’Œä¿®å¤é—®é¢˜,ä¿æŒä»£ç åº“é«˜è´¨é‡ã€‚
