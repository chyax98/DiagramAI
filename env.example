# DiagramAI 环境变量配置模板
# 复制此文件为 .env.local 并填入真实值

# ========================================
# 安全配置 (必须配置)
# ========================================

# JWT Secret Key (用于签名和验证 JWT Token)
# 生成方式: openssl rand -base64 64
# 最少 64 字符，建议使用强随机字符串
JWT_SECRET=your-secure-jwt-secret-key-min-64-chars-replace-this

# JWT 过期时间
# 格式: 数字+单位 (如 '7d', '24h', '3600s')
# 默认: 7 天
# JWT_EXPIRES_IN=7d

# ========================================
# 数据库配置
# ========================================

# SQLite 数据库文件路径
DB_PATH=./data/diagram-ai.db

# 数据库操作超时（毫秒）
DB_TIMEOUT=5000

# ========================================
# 密码加密配置
# ========================================

# bcrypt 加密轮数（8=开发, 10=默认, 12=生产）
BCRYPT_SALT_ROUNDS=10

# ========================================
# AI 服务配置
# ========================================

# AI 生成温度（0.0-2.0，推荐 0.7）
AI_TEMPERATURE=0.7

# AI 请求失败后的最大重试次数
AI_MAX_RETRIES=3

# AI 模型连接测试超时（毫秒）
# 30 秒足以覆盖普通模型和推理模型（如 o1, DeepSeek-R1）
API_TEST_TIMEOUT=30000

# 注意: AI Provider 的 API Key 存储在数据库 ai_models 表中
# 用户在前端「模型配置」页面添加 AI 模型和 API Key

# ========================================
# 外部服务配置 - Kroki 图表渲染 (后端代理 POST 方式)
# ========================================

# Kroki 服务 URL (后端专用)
# 默认: https://kroki.io (公共服务)
# 说明: 前端通过 /api/kroki 代理访问，无需配置客户端变量
# 也可以使用自部署的 Kroki 实例
# KROKI_URL=https://kroki.io

# Kroki 最大重试次数
# KROKI_MAX_RETRIES=3

# Kroki 重试延迟（毫秒）
# KROKI_RETRY_DELAY=1000

# ========================================
# 输入限制配置
# ========================================

# 最大输入字符数
NEXT_PUBLIC_MAX_INPUT_CHARS=20000

# 最大对话轮次
NEXT_PUBLIC_MAX_CHAT_ROUNDS=10

# ========================================
# 失败日志配置
# ========================================

# 是否启用渲染失败日志记录（默认启用）
# 用于收集失败案例,帮助后续优化提示词
ENABLE_FAILURE_LOGGING=true

# ========================================
# 应用配置
# ========================================

# 应用 URL
NEXT_PUBLIC_APP_URL=http://localhost:3000
