# C4-PlantUML æç¤ºè¯æ–‡æ¡£

## ğŸ“‹ æ¦‚è¿°

æœ¬ç›®å½•åŒ…å« C4-PlantUML çš„å®Œæ•´æç¤ºè¯ç³»ç»Ÿï¼ŒåŸºäº DEPTH æ–¹æ³•è®ºå’Œä¸‰å±‚æç¤ºè¯æ¶æ„ã€‚

### æ¶æ„å±‚æ¬¡

```
L1: é€šç”¨è§„èŒƒ (Universal Standards)
  â†“
L2a: PlantUML è¯­è¨€è§„èŒƒ (../../plantuml/common.ts)
  â†“
L2b: C4-PlantUML è¯­è¨€è§„èŒƒ (./common.ts)
  â†“
L3: C4 å­å›¾ç±»å‹ (5 ç§å­å›¾)
  â”œâ”€ Context (ç³»ç»Ÿä¸Šä¸‹æ–‡å›¾)
  â”œâ”€ Container (å®¹å™¨å›¾)
  â”œâ”€ Component (ç»„ä»¶å›¾)
  â”œâ”€ Dynamic (åŠ¨æ€å›¾)
  â””â”€ Deployment (éƒ¨ç½²å›¾)
```

## ğŸ“‚ æ–‡ä»¶ç»“æ„

```
c4/
â”œâ”€â”€ README.md                    # æœ¬æ–‡æ¡£
â”œâ”€â”€ common.ts                    # L2: C4-PlantUML è¯­è¨€è§„èŒƒ (~480 tokens)
â”œâ”€â”€ context.ts                   # L3: System Context å›¾ (~1180 tokens)
â”œâ”€â”€ container.ts                 # L3: Container å›¾ (~1190 tokens)
â”œâ”€â”€ component.ts                 # L3: Component å›¾ (~1180 tokens)
â”œâ”€â”€ dynamic.ts                   # L3: Dynamic å›¾ (~1160 tokens)
â”œâ”€â”€ deployment.ts                # L3: Deployment å›¾ (~1180 tokens)
â””â”€â”€ index.ts                     # ç»Ÿä¸€å¯¼å‡ºå’Œè¾…åŠ©å‡½æ•°
```

## ğŸ¯ å„å­å›¾ç±»å‹è¯´æ˜

### 1. Context (ç³»ç»Ÿä¸Šä¸‹æ–‡å›¾)
**æ–‡ä»¶**: `context.ts`  
**ç”¨é€”**: å±•ç¤ºç³»ç»Ÿä¸å¤–éƒ¨ç”¨æˆ·ã€å¤–éƒ¨ç³»ç»Ÿçš„äº¤äº’å…³ç³»  
**é€‚ç”¨åœºæ™¯**: 
- ç³»ç»Ÿæ•´ä½“æ¦‚è§ˆ
- å‘éæŠ€æœ¯äººå‘˜å±•ç¤ºç³»ç»Ÿè¾¹ç•Œ
- è¯†åˆ«å¤–éƒ¨ä¾èµ–

**å…³é”®å…ƒç´ **:
- `Person` / `Person_Ext`: ç”¨æˆ·
- `System` / `System_Ext`: ç³»ç»Ÿ

### 2. Container (å®¹å™¨å›¾)
**æ–‡ä»¶**: `container.ts`  
**ç”¨é€”**: å±•ç¤ºç³»ç»Ÿå†…éƒ¨çš„é«˜å±‚æŠ€æœ¯æ„æˆï¼ˆåº”ç”¨ã€æœåŠ¡ã€æ•°æ®åº“ç­‰ï¼‰  
**é€‚ç”¨åœºæ™¯**:
- å¾®æœåŠ¡æ¶æ„è®¾è®¡
- æŠ€æœ¯æ ˆé€‰å‹è¯´æ˜
- ç³»ç»Ÿæ¨¡å—åˆ’åˆ†

**å…³é”®å…ƒç´ **:
- `Container`: åº”ç”¨ã€æœåŠ¡
- `ContainerDb`: æ•°æ®åº“
- `ContainerQueue`: æ¶ˆæ¯é˜Ÿåˆ—
- `System_Boundary`: ç³»ç»Ÿè¾¹ç•Œ

### 3. Component (ç»„ä»¶å›¾)
**æ–‡ä»¶**: `component.ts`  
**ç”¨é€”**: å±•ç¤ºå®¹å™¨å†…éƒ¨çš„ç»„ä»¶åˆ’åˆ†å’Œä»£ç ç»“æ„  
**é€‚ç”¨åœºæ™¯**:
- ä»£ç æ¶æ„è®¾è®¡
- åˆ†å±‚æ¶æ„è¯´æ˜ï¼ˆMVCã€DDDï¼‰
- ç»„ä»¶èŒè´£åˆ’åˆ†

**å…³é”®å…ƒç´ **:
- `Component`: ä¸šåŠ¡ç»„ä»¶
- `ComponentDb`: æ•°æ®ç»„ä»¶
- `Container_Boundary`: å®¹å™¨è¾¹ç•Œ

### 4. Dynamic (åŠ¨æ€å›¾)
**æ–‡ä»¶**: `dynamic.ts`  
**ç”¨é€”**: å±•ç¤ºç‰¹å®šåœºæ™¯ä¸‹çš„è¿è¡Œæ—¶äº¤äº’å’Œæ—¶åº  
**é€‚ç”¨åœºæ™¯**:
- ä¸šåŠ¡æµç¨‹è¯´æ˜
- æ—¶åºäº¤äº’å±•ç¤º
- è°ƒç”¨é“¾è·¯åˆ†æ

**å…³é”®å…ƒç´ **:
- `RelIndex`: å¸¦åºå·çš„å…³ç³»
- æ‰€æœ‰ Context/Container/Component å…ƒç´ 

### 5. Deployment (éƒ¨ç½²å›¾)
**æ–‡ä»¶**: `deployment.ts`  
**ç”¨é€”**: å±•ç¤ºç³»ç»Ÿåœ¨ç‰©ç†åŸºç¡€è®¾æ–½ä¸Šçš„éƒ¨ç½²æ¶æ„  
**é€‚ç”¨åœºæ™¯**:
- ç”Ÿäº§ç¯å¢ƒæ¶æ„
- äº‘æœåŠ¡éƒ¨ç½²æ–¹æ¡ˆ
- å®¹å™¨ç¼–æ’ï¼ˆK8sï¼‰

**å…³é”®å…ƒç´ **:
- `Deployment_Node`: éƒ¨ç½²èŠ‚ç‚¹ï¼ˆæœåŠ¡å™¨ã€è™šæ‹Ÿæœºã€é›†ç¾¤ï¼‰
- `Container`: è¿è¡Œçš„åº”ç”¨å®ä¾‹

## ğŸ”§ ä½¿ç”¨æ–¹æ³•

### åŸºç¡€ç”¨æ³•

```typescript
import { getC4PlantUMLPrompt } from './index';

// è·å– Context å›¾çš„å®Œæ•´æç¤ºè¯
const contextPrompt = getC4PlantUMLPrompt('c4-context');

// è·å– Container å›¾çš„å®Œæ•´æç¤ºè¯
const containerPrompt = getC4PlantUMLPrompt('c4-container');
```

### æ£€æŸ¥æ”¯æŒ

```typescript
import { isC4TypeSupported, getSupportedC4Types } from './index';

// æ£€æŸ¥æ˜¯å¦æ”¯æŒç‰¹å®šç±»å‹
if (isC4TypeSupported('c4-context')) {
  // æ”¯æŒ
}

// è·å–æ‰€æœ‰æ”¯æŒçš„ç±»å‹
const types = getSupportedC4Types();
// ['c4-context', 'c4-container', 'c4-component', 'c4-dynamic', 'c4-deployment']
```

## ğŸ“Š Token é¢„ç®—

| å±‚çº§ | æ–‡ä»¶ | Token æ•° | çŠ¶æ€ |
|------|------|----------|------|
| L1 | common.ts (æ ¹ç›®å½•) | ~750 | âœ… |
| L2a | plantuml/common.ts | ~450 | âœ… |
| L2b | c4/common.ts | ~480 | âœ… |
| L3 | context.ts | ~1180 | âœ… |
| L3 | container.ts | ~1190 | âœ… |
| L3 | component.ts | ~1180 | âœ… |
| L3 | dynamic.ts | ~1160 | âœ… |
| L3 | deployment.ts | ~1180 | âœ… |

**æ€»é¢„ç®—**: çº¦ 1680-2900 tokensï¼ˆL1 + L2a + L2b + L3ï¼‰

## âœ… è´¨é‡æ ‡å‡†

æ‰€æœ‰æç¤ºè¯å‡ç¬¦åˆ PROMPT_WRITING_GUIDE.md è§„èŒƒï¼š

### DEPTH æ¡†æ¶å®ç°
- âœ… **D** (Define Multiple Perspectives): 3 ä¸ªä¸“å®¶è§’è‰²
- âœ… **E** (Establish Success Metrics): å¯é‡åŒ–çš„æˆåŠŸæ ‡å‡†
- âœ… **P** (Provide Context Layers): åˆ†å±‚ä¸Šä¸‹æ–‡ï¼ˆL1 + L2 + L3ï¼‰
- âœ… **T** (Task Breakdown): æ¸…æ™°çš„ä»»åŠ¡åˆ†è§£
- âœ… **H** (Human Feedback Loop): ç”Ÿæˆæ£€æŸ¥æ¸…å•

### å†…å®¹å®Œæ•´æ€§
- âœ… ä¸“å®¶è§†è§’ï¼ˆ3 ä¸ªè§’è‰²ï¼‰
- âœ… æ ¸å¿ƒè¯­æ³•è¯´æ˜
- âœ… ç”Ÿæˆç¤ºä¾‹ï¼ˆ2-3 ä¸ªï¼‰
- âœ… å¸¸è§é”™è¯¯ï¼ˆ4-6 ä¸ªï¼‰
- âœ… æ£€æŸ¥æ¸…å•ï¼ˆ5-8 ä¸ªæ£€æŸ¥ç‚¹ï¼‰

### Token æ§åˆ¶
- âœ… L2: 480 tokens (é¢„ç®— 200-500)
- âœ… L3: 1160-1190 tokens (é¢„ç®— 800-1200)

## ğŸ”— ç›¸å…³èµ„æº

### å®˜æ–¹æ–‡æ¡£
- [C4 Model å®˜æ–¹ç½‘ç«™](https://c4model.com/)
- [C4-PlantUML GitHub](https://github.com/plantuml-stdlib/C4-PlantUML)
- [PlantUML å®˜æ–¹æ–‡æ¡£](https://plantuml.com/)
- [Kroki æ¸²æŸ“æœåŠ¡](https://kroki.io/)

### é¡¹ç›®æ–‡æ¡£
- [PROMPT_WRITING_GUIDE.md](../../../../../../../../claudedocs/PROMPT_WRITING_GUIDE.md) - æç¤ºè¯ç¼–å†™è§„èŒƒ
- [PROMPT_TEAM_TASKS.md](../../../../../../../../claudedocs/PROMPT_TEAM_TASKS.md) - å›¢é˜Ÿä»»åŠ¡åˆ†é…

## ğŸ“ å¼€å‘è®°å½•

**å¼€å‘æ—¥æœŸ**: 2025-01-08  
**å¼€å‘è€…**: Droid (AI Assistant)  
**ç‰ˆæœ¬**: v1.0

### å®Œæˆå†…å®¹
- âœ… L2: C4-PlantUML è¯­è¨€è§„èŒƒ
- âœ… L3: Context å­å›¾ prompt
- âœ… L3: Container å­å›¾ prompt
- âœ… L3: Component å­å›¾ prompt
- âœ… L3: Dynamic å­å›¾ prompt
- âœ… L3: Deployment å­å›¾ prompt
- âœ… ç»Ÿä¸€å¯¼å‡ºå’Œè¾…åŠ©å‡½æ•°

### æµ‹è¯•çŠ¶æ€
- â³ å¾…è¿›è¡Œäººå·¥æµ‹è¯•ï¼ˆ3 ä¸ªåœºæ™¯ Ã— 5 ç§å­å›¾ï¼‰
- â³ å¾…éªŒè¯ Kroki æ¸²æŸ“
- â³ å¾…é›†æˆåˆ°ä¸»ç³»ç»Ÿ

## ğŸ“ æœ€ä½³å®è·µ

### 1. é€‰æ‹©åˆé€‚çš„å›¾è¡¨ç±»å‹
- **Context**: ç³»ç»Ÿè¾¹ç•Œå’Œå¤–éƒ¨äº¤äº’
- **Container**: æŠ€æœ¯æ¶æ„å’Œæ¨¡å—åˆ’åˆ†
- **Component**: ä»£ç ç»“æ„å’Œç»„ä»¶è®¾è®¡
- **Dynamic**: ä¸šåŠ¡æµç¨‹å’Œæ—¶åºäº¤äº’
- **Deployment**: éƒ¨ç½²æ¶æ„å’ŒåŸºç¡€è®¾æ–½

### 2. ä¿æŒå±‚æ¬¡ä¸€è‡´æ€§
- æ¯ä¸ªå›¾è¡¨èšç„¦å•ä¸€æŠ½è±¡å±‚æ¬¡
- ä¸åœ¨ Context å›¾ä¸­ä½¿ç”¨ Container å…ƒç´ 
- ä¸åœ¨ Container å›¾ä¸­ä½¿ç”¨ Component å…ƒç´ 

### 3. å®Œæ•´çš„æŠ€æœ¯æ ‡æ³¨
- Container å’Œ Component å¿…é¡»åŒ…å«æŠ€æœ¯æ ˆ
- Deployment å¿…é¡»æ ‡æ³¨ç¯å¢ƒå’Œå®ä¾‹æ•°
- å…³ç³»æè¿°åº”åŒ…å«é€šä¿¡åè®®

### 4. åˆç†çš„ç²’åº¦æ§åˆ¶
- Context: 5-10 ä¸ªç³»ç»Ÿ
- Container: 5-15 ä¸ªå®¹å™¨
- Component: 5-20 ä¸ªç»„ä»¶
- Dynamic: 5-15 ä¸ªæ­¥éª¤
- Deployment: é¿å…åµŒå¥—è¶…è¿‡ 3 å±‚

## ğŸ“ é—®é¢˜åé¦ˆ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·è”ç³»é¡¹ç›®ç»´æŠ¤è€…æˆ–æäº¤ GitHub Issueã€‚

---

**ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025-01-08
