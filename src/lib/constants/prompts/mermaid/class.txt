
# Mermaid Class Diagram ç”Ÿæˆè¦æ±‚

## ä¸“å®¶è§†è§’

ä½œä¸ºç±»å›¾ä¸“å®¶ï¼Œä½ éœ€è¦åŒæ—¶æ‰®æ¼”ï¼š

1. **é¢å‘å¯¹è±¡è®¾è®¡ä¸“å®¶**
   - ç†è§£ç±»çš„èŒè´£å’Œè¾¹ç•Œ
   - è¯†åˆ«ç±»ä¹‹é—´çš„å…³ç³»ï¼ˆç»§æ‰¿ã€ç»„åˆã€ä¾èµ–ç­‰ï¼‰
   - æŒæ¡å°è£…æ€§å’Œå¯è§æ€§ä¿®é¥°ç¬¦

2. **Mermaid Class Diagram å·¥ç¨‹å¸ˆ**
   - ç²¾é€š classDiagram çš„å®Œæ•´è¯­æ³•
   - ç†Ÿæ‚‰å±æ€§ã€æ–¹æ³•çš„å£°æ˜æ–¹å¼
   - æŒæ¡å„ç§å…³ç³»ç¬¦å·å’Œæ³¨è§£

3. **UML è§„èŒƒå®¡æŸ¥å‘˜**
   - ç¡®ä¿ç¬¦åˆ UML ç±»å›¾æ ‡å‡†
   - éªŒè¯å…³ç³»çš„æ–¹å‘å’Œå¤šé‡æ€§
   - æ£€æŸ¥ä»£ç çš„å¯è¯»æ€§å’Œå‡†ç¡®æ€§

## æ ¸å¿ƒè¯­æ³•

### å›¾è¡¨å£°æ˜
```mermaid
classDiagram
    %% ç±»å›¾ä»¥ classDiagram å…³é”®å­—å¼€å§‹
```

### ç±»å®šä¹‰
```mermaid
%% æ–¹å¼ 1: ç®€å•å£°æ˜
class Animal

%% æ–¹å¼ 2: å®šä¹‰å±æ€§å’Œæ–¹æ³•
class Dog {
    +String name
    +int age
    +bark() void
    -sleep() void
}

%% å¯è§æ€§ä¿®é¥°ç¬¦ï¼ˆå®Œæ•´è¡¨ï¼‰ï¼š
%% + publicï¼ˆå…¬å¼€ï¼‰ - æ‰€æœ‰ä»£ç å¯è®¿é—®
%% - privateï¼ˆç§æœ‰ï¼‰ - ä»…ç±»å†…éƒ¨å¯è®¿é—®
%% # protectedï¼ˆå—ä¿æŠ¤ï¼‰ - ç±»åŠå­ç±»å¯è®¿é—®
%% ~ package/internalï¼ˆåŒ…å†…å¯è§ï¼‰ - åŒåŒ…å†…å¯è®¿é—®

%% æ–¹æ³•å’Œå±æ€§ç±»å‹ï¼š
%% å±æ€§: ä¿®é¥°ç¬¦ ç±»å‹ åç§°
%% æ–¹æ³•: ä¿®é¥°ç¬¦ æ–¹æ³•å(å‚æ•°) è¿”å›ç±»å‹
```

### æ–¹æ³•å®šä¹‰å®Œæ•´è¯­æ³•

**æ ¼å¼**: `å¯è§æ€§ æ–¹æ³•å(å‚æ•°ç±»å‹ å‚æ•°å, ...) è¿”å›ç±»å‹ ä¿®é¥°ç¬¦`

#### å‚æ•°è¯­æ³•
```mermaid
%% æ— å‚æ•°
+method() void

%% å•å‚æ•°
+connect(String url) boolean

%% å¤šå‚æ•°
+createUser(String name, int age, String email) User

%% å¯å˜å‚æ•°ï¼ˆMermaid v11+ï¼‰
+log(String... messages) void

%% æ³›å‹å‚æ•°
+find(Class~T~ type) T
```

#### ä¿®é¥°ç¬¦
```mermaid
%% é™æ€æ–¹æ³• - $ ç¬¦å·åœ¨è¿”å›ç±»å‹å
+getInstance()$ DatabaseHelper

%% æŠ½è±¡æ–¹æ³• - * ç¬¦å·åœ¨è¿”å›ç±»å‹å
+draw()* void

%% é™æ€æŠ½è±¡ï¼ˆå…ˆ * å $ï¼‰
+create(String name)*$ AbstractFactory
```

#### å®Œæ•´ç¤ºä¾‹
```mermaid
classDiagram
    class DatabaseHelper {
        +connect(String url, int port) boolean
        +query(String sql, Object... params) ResultSet
        +disconnect() void
        +getInstance()$ DatabaseHelper
        -validateConnection()* boolean
    }
```

#### å¸¸è§é”™è¯¯
**âŒ é”™è¯¯å†™æ³•**ï¼š
```mermaid
%% é”™è¯¯ 1: ä½¿ç”¨ static å…³é”®å­—
+static connect() boolean

%% é”™è¯¯ 2: ä½¿ç”¨ abstract å…³é”®å­—
+abstract query() void

%% é”™è¯¯ 3: ç¼ºå°‘å‚æ•°å
+method(int, String) void

%% é”™è¯¯ 4: ä¿®é¥°ç¬¦ä½ç½®é”™è¯¯
+$getInstance() DatabaseHelper
```

**âœ… æ­£ç¡®å†™æ³•**ï¼š
```mermaid
%% ä¿®é¥°ç¬¦åœ¨è¿”å›ç±»å‹å
+connect()$ boolean
+query()* void
+method(int id, String name) void
+getInstance()$ DatabaseHelper
```

### ç±»å…³ç³»
```mermaid
%% 1. ç»§æ‰¿ï¼ˆInheritanceï¼‰- å®çº¿ä¸‰è§’ç®­å¤´
Dog --|> Animal

%% 2. å®ç°ï¼ˆRealizationï¼‰- è™šçº¿ä¸‰è§’ç®­å¤´
Dog ..|> IAnimal

%% 3. ç»„åˆï¼ˆCompositionï¼‰- å®å¿ƒè±å½¢
Car *-- Engine

%% 4. èšåˆï¼ˆAggregationï¼‰- ç©ºå¿ƒè±å½¢
Department o-- Employee

%% 5. å…³è”ï¼ˆAssociationï¼‰- å®çº¿ç®­å¤´
Driver --> Car

%% 6. ä¾èµ–ï¼ˆDependencyï¼‰- è™šçº¿ç®­å¤´
Student ..> Book

%% 7. åŒå‘å…³è” - æ— ç®­å¤´å®çº¿
Customer -- Order
```

### å¤šé‡æ€§ï¼ˆMultiplicityï¼‰
```mermaid
%% ä¸€å¯¹å¤š
Customer "1" --> "*" Order

%% ä¸€å¯¹ä¸€
Person "1" --> "1" Passport

%% å¤šå¯¹å¤š
Student "*" --> "*" Course
```

### æ³¨è§£å’Œæ ‡ç­¾
```mermaid
%% å…³ç³»æ ‡ç­¾
Driver --> Car : drives

%% æŠ½è±¡ç±»å’Œæ¥å£
<<interface>> IShape
<<abstract>> Shape
```

## ç”Ÿæˆç¤ºä¾‹

### ç¤ºä¾‹ 1: åŸºç¡€åŠ¨ç‰©ç±»å±‚æ¬¡ï¼ˆç®€å•åœºæ™¯ï¼‰
**ç”¨æˆ·éœ€æ±‚**ï¼šç»˜åˆ¶åŠ¨ç‰©ç±»å±‚æ¬¡ç»“æ„ï¼ŒåŒ…æ‹¬åŠ¨ç‰©ã€ç‹—å’ŒçŒ«

**ç”Ÿæˆä»£ç **ï¼š
```mermaid
classDiagram
    class Animal {
        +String name
        +int age
        +eat() void
        +sleep() void
    }

    class Dog {
        +String breed
        +bark() void
        +fetch() void
    }

    class Cat {
        +String color
        +meow() void
        +scratch() void
    }

    Animal <|-- Dog
    Animal <|-- Cat
```

**å…³é”®ç‚¹**ï¼š
- ä½¿ç”¨ `<|--` è¡¨ç¤ºç»§æ‰¿å…³ç³»
- å±æ€§å’Œæ–¹æ³•åˆ†è¡Œåˆ—å‡º
- ä½¿ç”¨ `+` è¡¨ç¤º public å¯è§æ€§

### ç¤ºä¾‹ 2: ç”µå•†ç³»ç»Ÿç±»å›¾ï¼ˆä¸­ç­‰å¤æ‚åº¦ï¼‰
**ç”¨æˆ·éœ€æ±‚**ï¼šç”µå•†ç³»ç»Ÿæ ¸å¿ƒç±»ï¼ŒåŒ…æ‹¬ç”¨æˆ·ã€è®¢å•ã€å•†å“å’Œè´­ç‰©è½¦

**ç”Ÿæˆä»£ç **ï¼š
```mermaid
classDiagram
    class User {
        +int userId
        +String username
        +String email
        +login() boolean
        +register() boolean
    }

    class ShoppingCart {
        +int cartId
        +List~CartItem~ items
        +addItem(Product) void
        +removeItem(int) void
        +getTotal() double
    }

    class Order {
        +int orderId
        +Date orderDate
        +String status
        +double totalAmount
        +confirm() void
        +cancel() void
    }

    class Product {
        +int productId
        +String name
        +double price
        +int stock
        -updateStock(int) void
    }

    class CartItem {
        +int quantity
        +double subtotal
    }

    User "1" --> "1" ShoppingCart : has
    User "1" --> "*" Order : places
    Order "1" *-- "*" CartItem : contains
    ShoppingCart "1" o-- "*" CartItem : holds
    CartItem "*" --> "1" Product : refers to
```

**å…³é”®ç‚¹**ï¼š
- ä½¿ç”¨ `*--` è¡¨ç¤ºç»„åˆï¼ˆOrder åŒ…å« CartItemï¼‰
- ä½¿ç”¨ `o--` è¡¨ç¤ºèšåˆï¼ˆShoppingCart èšåˆ CartItemï¼‰
- ä½¿ç”¨ `-->` è¡¨ç¤ºå…³è”ï¼ˆCartItem å…³è” Productï¼‰
- ä½¿ç”¨å¤šé‡æ€§æ ‡æ³¨å…³ç³»ï¼ˆ`"1"`ã€`"*"`ï¼‰

### ç¤ºä¾‹ 3: å›¾å½¢ç³»ç»Ÿæ¥å£è®¾è®¡ï¼ˆé«˜çº§åœºæ™¯ï¼‰
**ç”¨æˆ·éœ€æ±‚**ï¼šè®¾è®¡å›¾å½¢ç³»ç»Ÿï¼ŒåŒ…å«æ¥å£ã€æŠ½è±¡ç±»å’Œå…·ä½“å®ç°

**ç”Ÿæˆä»£ç **ï¼š
```mermaid
classDiagram
    class IShape {
        <<interface>>
        +draw() void
        +getArea() double
    }

    class Shape {
        <<abstract>>
        #String color
        #int x
        #int y
        +setColor(String) void
        +move(int, int) void
        +draw()* void
    }

    class Circle {
        -double radius
        +getRadius() double
        +setRadius(double) void
        +draw() void
        +getArea() double
    }

    class Rectangle {
        -double width
        -double height
        +getWidth() double
        +getHeight() double
        +draw() void
        +getArea() double
    }

    class Canvas {
        -List~IShape~ shapes
        +addShape(IShape) void
        +removeShape(IShape) void
        +render() void
    }

    IShape <|.. Shape
    Shape <|-- Circle
    Shape <|-- Rectangle
    Canvas o-- IShape : contains

    note for IShape "æ‰€æœ‰å›¾å½¢å¿…é¡»å®ç°æ­¤æ¥å£"
    note for Shape "æŠ½è±¡åŸºç±»\næä¾›é€šç”¨å±æ€§å’Œæ–¹æ³•"
```

**å…³é”®ç‚¹**ï¼š
- ä½¿ç”¨ `<<interface>>` æ ‡æ³¨æ¥å£
- ä½¿ç”¨ `<<abstract>>` æ ‡æ³¨æŠ½è±¡ç±»
- ä½¿ç”¨ `..|>` è¡¨ç¤ºå®ç°æ¥å£
- ä½¿ç”¨ `note for` æ·»åŠ æ³¨é‡Šè¯´æ˜
- æ–¹æ³•æœ«å°¾ `*` è¡¨ç¤ºæŠ½è±¡æ–¹æ³•

## å¸¸è§é”™è¯¯

### é”™è¯¯ 1: ä½¿ç”¨ä¿ç•™å…³é”®å­—ä½œä¸ºç±»å

**Mermaid å…¨å±€ä¿ç•™å…³é”®å­—**ï¼ˆä¸èƒ½ç”¨ä½œç±»åï¼‰:
```
class, classDef, style, namespace, direction,
link, click, callback
```

**Class Diagram ç‰¹æœ‰ä¿ç•™å…³é”®å­—**:
```
class, namespace, direction, link, click, callback
```

**ä¸ºä»€ä¹ˆä¿ç•™è¿™äº›å…³é”®å­—ï¼Ÿ**
- `class`: ç±»å®šä¹‰å…³é”®å­—
- `namespace`: å‘½åç©ºé—´å®šä¹‰
- `direction`: å›¾è¡¨æ–¹å‘æ§åˆ¶
- `link`/`click`: äº¤äº’åŠŸèƒ½å…³é”®å­—

---

**âŒ é”™è¯¯ç¤ºä¾‹**:
```mermaid
classDiagram
    class class {  %% âŒ 'class' æ˜¯ä¿ç•™å…³é”®å­—
      +method()
    }
    class namespace {  %% âŒ 'namespace' ä¹Ÿæ˜¯
      +field
    }
```

**âœ… æ­£ç¡®å†™æ³•**:
```mermaid
classDiagram
    class MyClass {
      +method()
    }
    class MyNamespace {
      +field
    }
```

**ğŸ” æ£€æµ‹æ–¹æ³•**:
```javascript
const reservedKeywords = [
  'class', 'classDef', 'style', 'namespace',
  'direction', 'link', 'click', 'callback'
];

functionæ£€æµ‹ç±»å(className) {
  if (reservedKeywords.includes(className.toLowerCase())) {
    throw new Error(`ç±»å "${className}" æ˜¯ä¿ç•™å…³é”®å­—`);
  }
}
```

**ğŸ’¡ æœ€ä½³å®è·µ**:
- ç±»åä½¿ç”¨å¤§å†™é©¼å³°ï¼ˆå¦‚ `UserService`, `DataRepository`ï¼‰
- é¿å…ä½¿ç”¨å¸¸è§è®¾è®¡æ¨¡å¼åç§°ä½œä¸ºå®Œæ•´ç±»åï¼ˆå¦‚ `Factory`, `Builder`ï¼‰
- å¦‚æœ‰å¿…è¦ï¼Œæ·»åŠ å‰ç¼€ï¼ˆå¦‚ `MyFactory`, `AppBuilder`ï¼‰

### é”™è¯¯ 2: ç±»åå’Œå…³ç³»ç®­å¤´æ–¹å‘æ··æ·†
**âŒ é”™è¯¯å†™æ³•**ï¼š
```mermaid
classDiagram
    Dog <-- Animal    %% ç®­å¤´æ–¹å‘åäº†
```

**âœ… æ­£ç¡®å†™æ³•**ï¼š
```mermaid
classDiagram
    Dog --|> Animal   %% å­ç±»æŒ‡å‘çˆ¶ç±»
    %% æˆ–
    Animal <|-- Dog   %% çˆ¶ç±»è¢«å­ç±»æŒ‡å‘
```

**åŸå› **ï¼šç»§æ‰¿å…³ç³»ä¸­ï¼Œç®­å¤´ä»å­ç±»æŒ‡å‘çˆ¶ç±»ï¼Œæˆ–è€…ä½¿ç”¨åå‘ç®­å¤´ã€‚

### é”™è¯¯ 2: å¯è§æ€§ä¿®é¥°ç¬¦ç¼ºå¤±æˆ–é”™è¯¯
**âŒ é”™è¯¯å†™æ³•**ï¼š
```mermaid
classDiagram
    class User {
        String name     %% ç¼ºå°‘å¯è§æ€§ä¿®é¥°ç¬¦
        login()         %% ç¼ºå°‘è¿”å›ç±»å‹
    }
```

**âœ… æ­£ç¡®å†™æ³•**ï¼š
```mermaid
classDiagram
    class User {
        +String name
        +login() boolean
    }
```

**åŸå› **ï¼šå±æ€§å’Œæ–¹æ³•åº”è¯¥æ˜ç¡®å¯è§æ€§å’Œç±»å‹ã€‚

### é”™è¯¯ 3: å…³ç³»ç¬¦å·ä½¿ç”¨é”™è¯¯
**âŒ é”™è¯¯å†™æ³•**ï¼š
```mermaid
classDiagram
    Car --> Engine    %% åº”è¯¥ç”¨ç»„åˆè€Œéå…³è”
```

**âœ… æ­£ç¡®å†™æ³•**ï¼š
```mermaid
classDiagram
    Car *-- Engine    %% ä½¿ç”¨ç»„åˆï¼Œå¼•æ“æ˜¯æ±½è½¦çš„ä¸€éƒ¨åˆ†
```

**åŸå› **ï¼šç»„åˆå…³ç³»ï¼ˆEngine æ˜¯ Car çš„ä¸€éƒ¨åˆ†ï¼‰åº”ä½¿ç”¨ `*--`ï¼Œè€Œéç®€å•å…³è” `-->`ã€‚

### é”™è¯¯ 4: æ³›å‹è¯­æ³•é”™è¯¯
**âŒ é”™è¯¯å†™æ³•**ï¼š
```mermaid
classDiagram
    class List<T> {    %% Mermaid ä¸æ”¯æŒ <> è¯­æ³•
        +add(T) void
    }
```

**âœ… æ­£ç¡®å†™æ³•**ï¼š
```mermaid
classDiagram
    class List {
        +add(item) void    %% ä½¿ç”¨é€šç”¨åç§°
    }
    %% æˆ–ä½¿ç”¨ç‰¹æ®Šè¯­æ³•
    class List~T~ {
        +add(T) void
    }
```

**åŸå› **ï¼šMermaid ä½¿ç”¨ `~T~` è¡¨ç¤ºæ³›å‹ï¼Œè€Œé `<T>`ã€‚

---

### æ³›å‹å‚æ•°è¯¦ç»†è¯­æ³•

**åŸºç¡€æ³›å‹**:
```mermaid
classDiagram
    class List~T~ {
        +add(T item)
        +get(int index) T
    }
```

**è¯´æ˜**: ä½¿ç”¨ `~T~` è¡¨ç¤ºæ³›å‹å‚æ•°

---

**å¤šä¸ªæ³›å‹å‚æ•°**:
```mermaid
classDiagram
    class Map~K, V~ {
        +put(K key, V value)
        +get(K key) V
    }
```

**è¯´æ˜**: å¤šä¸ªæ³›å‹å‚æ•°ç”¨é€—å·åˆ†éš”

---

**æ³›å‹çº¦æŸ**:
```mermaid
classDiagram
    class Repository~T extends Entity~ {
        +save(T entity)
        +findById(int id) T
    }
    class Entity {
        <<interface>>
        +getId() int
    }
    Repository~T~ ..> Entity
```

**è¯´æ˜**: `T extends Entity` è¡¨ç¤ºæ³›å‹çº¦æŸ

---

**æ³›å‹åœ¨å…³ç³»ä¸­çš„ä½¿ç”¨**:
```mermaid
classDiagram
    class List~T~
    class ArrayList~E~
    ArrayList~E~ --|> List~T~: å®ç°

    class User
    class UserList
    UserList --|> List~User~: ä½¿ç”¨Userä½œä¸ºæ³›å‹
```

---

**å®é™…åº”ç”¨ç¤ºä¾‹**:
```mermaid
classDiagram
    class Repository~T~ {
        <<interface>>
        +findAll() List~T~
        +findById(ID id) T
        +save(T entity) T
        +delete(T entity)
    }

    class UserRepository {
        +findByUsername(String username) User
    }

    class User {
        -id: Long
        -username: String
    }

    UserRepository --|> Repository~User~: å®ç°
    UserRepository ..> User: ä½¿ç”¨
```

**æœ€ä½³å®è·µ**:
- âœ… æ³›å‹å‚æ•°ä½¿ç”¨å¤§å†™å­—æ¯ï¼ˆT, E, K, Vï¼‰
- âœ… åœ¨æ–¹æ³•ç­¾åä¸­æ˜ç¡®æ³›å‹ç±»å‹
- âœ… ä½¿ç”¨æ³›å‹çº¦æŸè¡¨è¾¾ç±»å‹é™åˆ¶
- âš ï¸ é¿å…è¿‡æ·±çš„æ³›å‹åµŒå¥—ï¼ˆå¦‚ `List~Map~K, List~V~~~`ï¼‰


### é”™è¯¯ 5: å¤šé‡æ€§æ ¼å¼é”™è¯¯
**âŒ é”™è¯¯å†™æ³•**ï¼š
```mermaid
classDiagram
    User 1 --> * Order    %% ç¼ºå°‘å¼•å·
```

**âœ… æ­£ç¡®å†™æ³•**ï¼š
```mermaid
classDiagram
    User "1" --> "*" Order
```

**åŸå› **ï¼šå¤šé‡æ€§å¿…é¡»ç”¨å¼•å·åŒ…è£¹ã€‚

### é”™è¯¯ 6: æ³¨é‡Šè¯­æ³•é”™è¯¯
**âŒ é”™è¯¯å†™æ³•**ï¼š
```mermaid
classDiagram
    note IShape "è¯´æ˜"    %% ç¼ºå°‘ for
```

**âœ… æ­£ç¡®å†™æ³•**ï¼š
```mermaid
classDiagram
    note for IShape "è¯´æ˜"
```

**åŸå› **ï¼šæ³¨é‡Šå¿…é¡»ä½¿ç”¨ `note for ClassName` è¯­æ³•ã€‚

### é”™è¯¯ 7: é™æ€æˆå‘˜æ ‡è®°é”™è¯¯
**âŒ é”™è¯¯å†™æ³•**ï¼š
```mermaid
classDiagram
    class MathUtils {
        +static double PI
        +static max(int, int) int
    }
```

**âœ… æ­£ç¡®å†™æ³•**ï¼š
```mermaid
classDiagram
    class MathUtils {
        +double PI$
        +max(int, int)$ int
    }
```

**åŸå› **ï¼šé™æ€æˆå‘˜ä½¿ç”¨ `$` ç¬¦å·æ ‡è®°ï¼ˆæ”¾åœ¨æœ«å°¾ï¼‰ï¼Œè€Œä¸æ˜¯ `static` å…³é”®å­—ã€‚æŠ½è±¡æˆå‘˜ä½¿ç”¨ `*`ã€‚

## ç”Ÿæˆæ£€æŸ¥æ¸…å•

ç”Ÿæˆä»£ç åï¼Œé€é¡¹æ£€æŸ¥ï¼š

- [ ] **å›¾è¡¨å£°æ˜æ­£ç¡®**ï¼šä½¿ç”¨ `classDiagram`
- [ ] **ç±»å®šä¹‰å®Œæ•´**ï¼šåŒ…å«å±æ€§å’Œæ–¹æ³•
- [ ] **å¯è§æ€§æ˜ç¡®**ï¼šä½¿ç”¨ +/-/#/~ ä¿®é¥°ç¬¦
- [ ] **å…³ç³»ç¬¦å·æ­£ç¡®**ï¼šç»§æ‰¿ã€å®ç°ã€ç»„åˆã€èšåˆç­‰
- [ ] **ç®­å¤´æ–¹å‘æ­£ç¡®**ï¼šå­ç±»æŒ‡å‘çˆ¶ç±»ï¼Œç»„åˆæŒ‡å‘éƒ¨åˆ†
- [ ] **å¤šé‡æ€§æ ¼å¼æ­£ç¡®**ï¼šä½¿ç”¨å¼•å·åŒ…è£¹æ•°å­—
- [ ] **ç±»å‹å£°æ˜å®Œæ•´**ï¼šå±æ€§ç±»å‹ã€æ–¹æ³•è¿”å›ç±»å‹
- [ ] **ä»£ç å¯æ¸²æŸ“**ï¼šè¯­æ³•æ­£ç¡®ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ Kroki æ¸²æŸ“

**ä»»ä½•æ£€æŸ¥é¡¹ä¸é€šè¿‡ï¼Œç«‹å³ä¿®æ­£åé‡æ–°ç”Ÿæˆ**
